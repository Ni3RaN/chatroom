# Chatroom 

项目采用socket.io+express+Mongodb制作了一个在线群聊的网页。

对于聊天记录持久化保存。

对于用户头像只能在给定头像中选择，不能上传。

体验地址：http://81.70.243.180:1625

#### 引入的包的作用

使用Mongodb，将用户信息保存在其中。

引入express实现静态目录和路由，作为后端。

引入express-session实现session的实现，储存用户的登录信息。

引入body-parser来完成json和string类型的转化。

引入mongoose来实现node中对数据库的增删功能。

引入socket.io监听连接的建立、断开事件，监听用户的登录、发送消息事件。

引入express-art-template渲染网页。

引入weui作为前端ui。

#### 目录结构

`├─models //models目录，数据库schema`

`├─public  //静态目录`

`│  │─css  //网页css`

`│  │─images  //用户头像`

`│  │─js  //网页js`

`├─views  //网页html`

`├─app.js  //项目主程序`

`├─route.js  //路由`

#### 使用说明

登录注册如同一般网页。

登录之后对移动端和pc端进行响应式适配。

下方是聊天框，上面是标题，中间是聊天区域。

pc端左侧显示用户在线列表，在左侧有退出和修改资料的操作。

移动端是在右上角。

在修改资料界面可以修改用户名，密码，头像。

#### 开发日记

第一天

首先将登录和注册界面做好，使用的express作静态目录和路由。

然后发现注册应该需要输入两次密码，修改了下。

然后完成主界面，模仿pc端wx聊天界面。

然后使用socket.io，监听用户的登录和退出。

第二天

对于界面发现手机上使用不方便，然后对移动端进行适配。

中间还有对本来的节目debug和适应深色模式，由于对css不熟悉，所以debug了好几天，后面不再赘述。

第三天

实现了对聊天内容的监听。

基本实现了主要功能。

第四天

加入资料修改页面，由于注册时使用默认头像，所以修改资料界面会涉及头像的选择。

但是这天没做这个。

第五天

完成头像能够选择。

没有选择头像能够自行上传是考虑服务器对于照片存储压力比较大(我自己的腾讯云)。

修改资料对数据库的操作是先删再加，而不是findoneandupdate。

第六天

前端debug。

第七天

代码规范化。

聊天记录持久化，存储在数据库。

书写文档。

